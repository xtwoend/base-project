import{_ as D,a as E,D as $,o as d,c as h,b as y,d as W,r as k,w as v,e as S,n as x,g as V,f as C,h as n,i as m,t as r,F as T,C as L,m as P,j as b,v as w,k as f,l as z,p as U,V as B}from"./vendor.e234436c.js";window._=D;window.axios=E;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const g=(e,s)=>{const i=e.__vccOpts||e;for(const[a,t]of s)i[a]=t;return i},I={props:{url:String,headers:Array},components:{Vue3EasyDataTable:$},data(){return{options:{page:1,rowsPerPage:25},dataLength:0,isLoading:!1,items:[],params:{}}},mounted(){this.fetchData()},watch:{options:{handler(e){this.fetchData()},deep:!0}},methods:{async fetchData(){this.isLoading=!0,this.items=[];let e=await axios.get(this.url,{params:this.options}).then(s=>s.data);this.items=e.data,this.dataLength=e.total,this.options.page=e.current_page,this.options.rowsPerPage=e.per_page,this.isLoading=!1},reload(){console.log("reload")}}},H={class:"table-responsive"};function N(e,s,i,a,t,l){const u=C("Vue3EasyDataTable");return d(),h("div",H,[y(u,{alternating:"","show-index":"","table-class-name":"vtable","server-options":t.options,"onUpdate:server-options":s[0]||(s[0]=o=>t.options=o),"server-items-length":t.dataLength,loading:t.isLoading,headers:i.headers,items:t.items,ref:"vtable"},W({_:2},[k(e.$slots,(o,c)=>({name:c,fn:v(p=>[S(e.$slots,c,x(V(p||{})))])}))]),1032,["server-options","server-items-length","loading","headers","items"])])}const O=g(I,[["render",N]]);const A={props:{},data(){return{scadavis:null,tags:null,rotate:1}},async mounted(){await this.init(),this.dataInit()},created(){window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},methods:{async init(){this.scadavis=await scadavisInit({container:"scada-svg",svgurl:"/svg/sample.svg"}),this.scadavis.enableTools(!1,!0),this.scadavis.hideWatermark(),this.tags=this.scadavis.getTagsList().split(","),this.tags.forEach(e=>{this.scadavis.setValue(e,0)}),this.resize()},dataInit(){let e=this;setInterval(function(){e.tags.forEach(s=>{e.scadavis.setValue(s,Math.random()*100)}),e.animate()},1e3)},animate(){for(var e=1;e<=3;e++){var s=this.rotate,i="amp_dig"+e;if(this.scadavis.getValue(i)>0){s=s<4?s+1:1;for(var a=1;a<=4;a++){var t=s==a?1:0,l="agitator_d"+e+"_"+a;this.scadavis.setValue(l,t)}}this.rotate=s}},resize(){this.scadavis.zoomToOriginal();let e=this.$refs.cnsvg;this.scadavis.zoomTo(1*(e.clientWidth<e.clientHeight?e.clientWidth/600:e.clientHeight/600))}}},M={id:"scada-svg",class:"scada",ref:"cnsvg"};function q(e,s,i,a,t,l){return d(),h(T,null,[n("div",M,null,512),m(" "+r(t.tags),1)],64)}const R=g(A,[["render",q]]);const F={components:{vSelect:L},props:{svg:Object,servers:Array},data(){return{scadavis:null,tags:{},server:null,options:{},topic:null,connection:null,isConnect:!1}},created(){window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},mounted(){this.init()},methods:{async init(){this.scadavis=await scadavisInit({container:"scada-svg",svgurl:"/"+this.svg.path}),this.scadavis.enableTools(!1,!0),this.scadavis.hideWatermark(),this.scadavis.getTagsList().split(",").forEach(s=>{this.scadavis.setValue(s,0),this.tags[s]=0}),this.resize()},resize(){this.scadavis.zoomToOriginal();let e=this.$refs.cnsvg;this.scadavis.zoomTo(1*(e.clientWidth<e.clientHeight?e.clientWidth/600:e.clientHeight/600))},preview(e,s){this.tags[e]=s,this.scadavis.setValue(e,s)},async connect(){let e=`${this.server.host}:${this.server.port}`;this.connection=await P.exports.connect(e,this.options);let s=this;this.connection.on("connect",function(){s.isConnect=!0,s.connection.subscribe(s.topic,function(i){i||console.log("connected")})}),this.connection.on("close",function(){tags.forEach(i=>{this.preview(i,data[i])}),this.isConnect=!1}),this.connection.on("message",this.received)},received(e,s){let i=JSON.parse(s.toString());for(const a in i)this.preview(a,i[a])}}},X={class:"box box-primary"},J={class:"box-header with-border"},Q={class:"box-title"},G={class:"box-body row"},K={class:"col-md-4"},Y={class:"col-sm-5 control-label"},Z={class:"col-sm-7"},j={class:"input-group"},ee=["onUpdate:modelValue"],se={class:"input-group-btn"},te=["onClick"],ne={class:"col-md-8"},oe={class:"setting"},ie={class:"form-group"},ae=n("label",{for:"icon"},"MQTT Server",-1),ce=n("i",{class:"fa fa-angle-down"},null,-1),le=[ce],re={class:"form-group"},de=n("label",{for:"icon"},"Topic",-1),he={class:"input-group"},pe={class:"input-group-btn"},ue={key:0},ve={key:1},_e={id:"scada-svg",class:"scada",ref:"cnsvg"};function me(e,s,i,a,t,l){const u=C("v-select");return d(),h("div",X,[n("div",J,[n("h3",Q,r(i.svg.name),1)]),n("div",G,[n("div",K,[(d(!0),h(T,null,k(t.tags,(o,c)=>(d(),h("div",{class:"form-group",key:c},[n("label",Y,r(c),1),n("div",Z,[n("div",j,[b(n("input",{type:"text",class:"form-control","onUpdate:modelValue":p=>t.tags[c]=p},null,8,ee),[[w,t.tags[c]]]),n("span",se,[n("button",{type:"button",class:"btn btn-info btn-flat",onClick:p=>l.preview(c,t.tags[c])},"Preview",8,te)])])])]))),128))]),n("div",ne,[n("div",oe,[n("div",ie,[ae,y(u,{label:"name",modelValue:t.server,"onUpdate:modelValue":s[0]||(s[0]=o=>t.server=o),options:i.servers},{"open-indicator":v(({attributes:o})=>[n("span",x(V(o)),le,16)]),option:v(({name:o,host:c,port:p})=>[m(r(o)+" ("+r(c)+":"+r(p)+") ",1)]),"selected-option":v(({name:o,host:c,port:p})=>[m(r(o)+" ("+r(c)+":"+r(p)+") ",1)]),_:1},8,["modelValue","options"])]),n("div",re,[de,n("div",he,[b(n("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>t.topic=o),class:"form-control"},null,512),[[w,t.topic]]),n("div",pe,[n("button",{class:f(["btn btn-primary",{"btn-success":t.isConnect}]),onClick:s[2]||(s[2]=(...o)=>l.connect&&l.connect(...o))},[t.isConnect?(d(),h("span",ue,"Connected")):z("",!0),t.isConnect?z("",!0):(d(),h("span",ve,"Connect"))],2)])])])]),n("div",_e,null,512)])])])}const ge=g(F,[["render",me]]),fe={props:{url:String,btnClass:String},methods:{del(){let e=this;this.$swal({title:"Do you want to delete?",showCancelButton:!0,confirmButtonText:"Delete"}).then(s=>{s.isConfirmed&&axios.delete(e.url).then(()=>{e.$swal("Deleted!","","success"),location.reload()})})}}};function be(e,s,i,a,t,l){return d(),h("a",{href:"#",class:f(i.btnClass),onClick:s[0]||(s[0]=(...u)=>l.del&&l.del(...u))},[S(e.$slots,"default")],2)}const we=g(fe,[["render",be]]),ye={components:{vSelect:L},props:{icons:Array,value:String,name:String},data(){return{selected:null}},mounted(){this.selected=this.value}},xe=n("i",{class:"fa fa-angle-down"},null,-1),Ve=[xe],Ce=["name"];function Te(e,s,i,a,t,l){const u=C("v-select");return d(),h(T,null,[y(u,{modelValue:t.selected,"onUpdate:modelValue":s[0]||(s[0]=o=>t.selected=o),options:i.icons},{"open-indicator":v(({attributes:o})=>[n("span",x(V(o)),Ve,16)]),option:v(o=>[n("i",{class:f(o.label)},null,2),m(" "+r(o.label),1)]),"selected-option":v(o=>[n("i",{class:f(o.label)},null,2),m(" "+r(o.label),1)]),_:1},8,["modelValue","options"]),b(n("input",{type:"hidden",name:i.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.selected=o)},null,8,Ce),[[w,t.selected]])],64)}const ze=g(ye,[["render",Te]]),_=U({});_.use(B);_.component("data-table",O);_.component("example-component",R);_.component("workbench",ge);_.component("btn-remove",we);_.component("icon-select",ze);_.mount("#app");
